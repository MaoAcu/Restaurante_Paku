<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Paku</title>
    

    <link rel="stylesheet" href="{{ url_for('static', filename='css/dash.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modal.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>

    <!--Modal confirmacion-->
    <div id="deleteModal" class="modal-overlay">
    <div class="modal-card">
        <div class="modal-icon">
            <i class="fa-solid fa-trash-can"></i>
        </div>
        
        <div class="modal-body">
            <h3>¿Eliminar este platillo?</h3>
            <p>Esta acción no se puede deshacer. El ítem desaparecerá del menú de <strong>Paku</strong> inmediatamente.</p>
        </div>

        <div class="modal-actions">
            <button class="btn-cancel" onclick="closeDeleteModal()">
                Cancelar
            </button>
            <button class="btn-confirm" id="confirmDeleteBtn">
                Eliminar ítem
            </button>
        </div>
    </div>
</div>
    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Sidebar Overlay para móviles -->
        <div class="sidebar-overlay"></div>
        
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h2><i class="fas fa-utensils"></i> Mi Restaurante</h2>
                <p class="restaurant-subtitle">Panel de Control</p>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                     
                    <li  data-section="promos">
                        <i class="fas fa-tags"></i>  
                        <span>Promociones</span>
                    </li>
                    <li data-section="bebidas-licor">
                        <i class="fas fa-beer"></i>  
                        <span>Bebidas con Alcohol</span>
                    </li>
                    <li data-section="bebidas-sin">
                        <i class="fas fa-glass-cheers"></i>  
                        <span>Bebidas sin Alcohol</span>
                    </li>
                    <li data-section="entradas">
                        <i class="fas fa-bread-slice"></i>  
                        <span>Entradas</span>
                    </li>
                    <li data-section="ensaladas">
                        <i class="fas fa-seedling"></i>  
                        <span>Ensaladas</span>
                    </li>
                    <li data-section="ninos">
                        <i class="fas fa-child"></i>  
                        <span>Menu <br> Niños</span>
                    </li>
                    <li data-section="hamburguesas">
                        <i class="fas fa-hamburger"></i>  
                        <span>Hamburguesas</span>
                    </li>
                    <li data-section="postres">
                        <i class="fas fa-ice-cream"></i>
                        <span>Postres</span>
                    </li>
                    <li data-section="desayunos">
                        <i class="fas fa-coffee"></i>  
                        <span>Desayunos</span>
                    </li>
                    <li data-section="config">
                        <i class="fas fa-cog"></i>
                        <span>Configuración</span>
                    </li>
                </ul>
            </nav>
            
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user-circle"></i>
                    <div>
                        <p class="user-name">Administrador</p>
                        <p class="user-role">Dueño</p>
                    </div>
                </div>
                <a href="{{ url_for('auth.logout') }}" style="text-decoration: none;" id="logoutBtn" class="btn-logout">
                    <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar con menú hamburguesa -->
            <header class="top-bar">
                <button id="menuToggle" class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                
                <h1 id="sectionTitle">Menú Principal</h1>
                
                
                <div class="header-actions">
                    <button id="saveAllBtn" class="btn-save"  style="display: none;">
                        <i class="fas fa-save"></i> Guardar Cambios
                    </button>
                </div>
            </header>

           <!-- Sección de Promociones -->
<div id="promosSection" class="content-section" style="display: none;">
    <div class="section-header">
        <h2><i class="fas fa-tags"></i> Promociones</h2>
        <button class="btn-add-item" data-category="promos">
            <i class="fas fa-plus"></i> Agregar Promoción
        </button>
    </div>
    <div id="promosItems" class="items-grid">
        <!-- Las promociones se cargan de forma dinámica -->
    </div>
</div>

<!-- Sección de Bebidas con Alcohol -->
<div id="bebidas-licorSection" class="content-section" style="display: none;">
    <div class="section-header">
        <h2><i class="fas fa-beer"></i> Bebidas con Alcohol</h2>
        <button class="btn-add-item" data-category="bebidas-licor">
            <i class="fas fa-plus"></i> Agregar Bebida
        </button>
    </div>
    <div id="bebidas-licorItems" class="items-grid">
        <!-- Las bebidas con alcohol se cargan de forma dinámica -->
    </div>
</div>

<!-- Sección de Bebidas sin Alcohol -->
<div id="bebidas-sinSection" class="content-section" style="display: none;">
    <div class="section-header">
        <h2><i class="fas fa-glass-whiskey"></i> Bebidas sin Alcohol</h2>
        <button class="btn-add-item" data-category="bebidas-sin">
            <i class="fas fa-plus"></i> Agregar Bebida
        </button>
    </div>
    <div id="bebidas-sinItems" class="items-grid">
        <!-- Las bebidas sin alcohol se cargan de forma dinámica -->
    </div>
</div>

<!-- Sección de Entradas -->
<div id="entradasSection" class="content-section" style="display: none;">
    <div class="section-header">
        <h2><i class="fas fa-utensils"></i> Entradas</h2>
        <button class="btn-add-item" data-category="entradas">
            <i class="fas fa-plus"></i> Agregar Entrada
        </button>
    </div>
    <div id="entradasItems" class="items-grid">
        <!-- Las entradas se cargan de forma dinámica -->
    </div>
</div>

<!-- Sección de Ensaladas -->
<div id="ensaladasSection" class="content-section" style="display: none;">
    <div class="section-header">
        <h2><i class="fas fa-seedling"></i> Ensaladas</h2>
        <button class="btn-add-item" data-category="ensaladas">
            <i class="fas fa-plus"></i> Agregar Ensalada
        </button>
    </div>
    <div id="ensaladasItems" class="items-grid">
        <!-- Las ensaladas se cargan de forma dinámica -->
    </div>
</div>

<!-- Sección de Menú Niños -->
<div id="ninosSection" class="content-section" style="display: none;">
    <div class="section-header">
        <h2><i class="fas fa-child"></i> Menú Niños</h2>
        <button class="btn-add-item" data-category="ninos">
            <i class="fas fa-plus"></i> Agregar Plato
        </button>
    </div>
    <div id="ninosItems" class="items-grid">
        <!-- Los platos para niños se cargan de forma dinámica -->
    </div>
</div>

<!-- Sección de Hamburguesas -->
<div id="hamburguesasSection" class="content-section" style="display: none;">
    <div class="section-header">
        <h2><i class="fas fa-hamburger"></i> Hamburguesas</h2>
        <button class="btn-add-item" data-category="hamburguesas">
            <i class="fas fa-plus"></i> Agregar Hamburguesa
        </button>
    </div>
    <div id="hamburguesasItems" class="items-grid">
        <!-- Las hamburguesas se cargan de forma dinámica -->
    </div>
</div>

<!-- Sección de Postres -->
<div id="postresSection" class="content-section" style="display: none;">
    <div class="section-header">
        <h2><i class="fas fa-ice-cream"></i> Postres</h2>
        <button class="btn-add-item" data-category="postres">
            <i class="fas fa-plus"></i> Agregar Postre
        </button>
    </div>
    <div id="postresItems" class="items-grid">
        <!-- Los postres se cargan de forma dinámica -->
    </div>
</div>

<!-- Sección de Desayunos -->
<div id="desayunosSection" class="content-section" style="display: none;">
    <div class="section-header">
        <h2><i class="fas fa-coffee"></i> Desayunos</h2>
        <button class="btn-add-item" data-category="desayunos">
            <i class="fas fa-plus"></i> Agregar Desayuno
        </button>
    </div>
    <div id="desayunosItems" class="items-grid">
        <!-- Los desayunos se cargan de forma dinámica -->
    </div>
</div>

            <!-- Sección de Configuración -->
            <div id="configSection" class="content-section" style="display: none;">
                <div class="config-container">
                    <h2><i class="fas fa-cog"></i> Configuración General</h2>
                    
                    <div class="config-grid">
                        <div class="config-card">
                            <h3><i class="fas fa-store"></i> Información del Restaurante</h3>
                            <div class="config-form">
                                <div class="form-group">
                                    <label>Nombre del Restaurante</label>
                                    <input type="text" id="restaurantName" placeholder="Ej: Paku Restaurante & Bar">
                                </div>
                                <div class="form-group">
                                    <label>Descripción</label>
                                    <textarea id="restaurantDescription" rows="3" placeholder="Breve descripción del restaurante"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Horario</label>
                                    <input type="text" id="restaurantHours" placeholder="Ej: Lunes a Viernes 9:00-22:00">
                                </div>
                            </div>
                        </div>
                        
                        <div class="config-card">
                            <h3><i class="fas fa-user-shield"></i> Seguridad</h3>
                            <div class="config-form">
                                <div class="form-group">
                                    <label>Cambiar Contraseña</label>
                                    <input type="password" id="newPassword" placeholder="Nueva contraseña">
                                </div>
                                <div class="form-group">
                                    <label>Confirmar Contraseña</label>
                                    <input type="password" id="confirmPassword" placeholder="Confirmar nueva contraseña">
                                </div>
                                <button id="saveConfigBtn" class="btn-save">
                                    <i class="fas fa-save"></i> Guardar Configuración
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para editar/agregar items -->
<div id="editModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">Editar Item</h3>
            <span class="close-modal">&times;</span>
        </div>
        <div class="modal-body">
            <form id="itemForm" enctype="multipart/form-data">
                <input type="hidden" id="itemId">
                
                <div class="form-group">
                    <label for="itemCategory">Categoría</label>
                    <select id="itemCategory" required>
                        <option value="">Seleccionar categoría</option>
                        <option value="promos">Promociones</option>
                        <option value="bebidas-licor">Bebidas con Alcohol</option>
                        <option value="bebidas-sin">Bebidas sin Alcohol</option>
                        <option value="entradas">Entradas</option>
                        <option value="ensaladas">Ensaladas</option>
                        <option value="ninos">Menú Niños</option>
                        <option value="hamburguesas">Hamburguesas</option>
                        <option value="postres">Postres</option>
                        <option value="desayunos">Desayunos</option>
                    </select>
                </div>
                
                <!-- Subcategorías (solo visible para bebidas) -->
                <div class="form-group" id="subcategoryGroup" style="display: none;">
                    <label for="itemSubcategory">Subcategoría</label>
                    <select id="itemSubcategory" name="subcategory">
                        <option value="">Sin subcategoría</option>
                        <!-- Las opciones se llenarán dinámicamente según el tipo de bebida -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="itemName">Nombre del Plato/Bebida</label>
                    <input type="text" id="itemName" required placeholder="Ej: Hamburguesa Especial">
                </div>
                
                <div class="form-group">
                    <label for="itemDescription">Descripción</label>
                    <textarea id="itemDescription" rows="3" placeholder="Describe el plato, ingredientes, etc."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="itemPrice">Precio (₡)</label>
                    <div class="price-input">
                        <span class="currency">₡</span>
                        <input type="number" id="itemPrice" step="0.01" min="0" required placeholder="0.00">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="itemImage">URL de la Imagen</label>
                    <div class="image-input-group">
                        <input type="text" id="itemImage" placeholder="https://ejemplo.com/imagen.jpg">
                        <button type="button" class="btn-image-upload" onclick="document.getElementById('imageUpload').click()">
                            <i class="fas fa-upload"></i>
                        </button>
                    </div>
                    <small>Inserta una URL o sube una imagen</small>
                    <input type="file" name="image" id="imageUpload" accept="image/*" style="display: none;">
                </div>
                
                <div class="form-group">
                    <label for="itemStatus">Estado</label>
                    <div class="status-toggle">
                        <button type="button" class="status-btn active" data-status="active">Activo</button>
                        <button type="button" class="status-btn" data-status="inactive">Inactivo</button>
                        <input type="hidden" id="itemStatus" value="active">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-cancel close-modal">Cancelar</button>
                    <button type="submit" class="btn-save">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>
</div>

    <!-- Modal para subir imagen -->
    <div id="uploadModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Subir Imagen</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="dropArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Arrastra una imagen aquí o haz clic para seleccionar</p>
                    <input type="file" id="fileUpload" accept="image/*">
                </div>
                <div class="preview-container">
                    <img id="imagePreview" src="" alt="Vista previa">
                </div>
                <div class="upload-actions">
                    <button id="cancelUpload" class="btn-cancel">Cancelar</button>
                    <button id="confirmUpload" class="btn-save" disabled>Usar Imagen</button>
                </div>
            </div>
        </div>
    </div>

<div id="net-status" 
     style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #c0392b;
        color: white;
        padding: 12px 18px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        display: none;
        font-weight: bold;
        z-index: 99999;
    ">
    Sin conexión
</div>
<script>
    const MENU_URL = "{{ url_for('menu.GetMenu') }}";
    const EDIT_MENU_URL = "{{ url_for('menu.PatchMenuSection', idmenu=0) }}";
    const IMG="{{ url_for('static', filename='images/menu/') }}"
   </script>
<script src="{{url_for('static', filename='js/dashboard.js')}}"></script>
<script src="{{url_for('static', filename='js/modal.js')}}"></script>
<script src="{{ url_for('static', filename='js/Fueralinea.js') }}"></script>
</body>
</html>